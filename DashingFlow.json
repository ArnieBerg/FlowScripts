{
  "FlowScriptName": "DashingFlow",
  "TestConfig": {},
  "SubmissionTimeStamp": "0604075124",
  "LockUsername": null,
  "Comment": "",
  "DataSourceType": 1,
  "SerializeDataSteps": false,
  "SampleList": {
    "2.Thompson.Run4": "1[S]/mnt/e/data/Ruwani_Novel_Salmonella_Project_2022/Objective2-Run4_NonAdaptive_15Dec22/Objective2-Run4_NonAdaptive_15Dec22/20221215_1215_X2_FAV71906_63db05c7/fastq_pass/2.Thompson.Run4/",
    "3.Mbandaka.Run4": "1[S]/mnt/e/data/Ruwani_Novel_Salmonella_Project_2022/Objective2-Run4_NonAdaptive_15Dec22/Objective2-Run4_NonAdaptive_15Dec22/20221215_1215_X2_FAV71906_63db05c7/fastq_pass/3.Mbandaka.Run4/"
  },
  "SequenceList": [],
  "SequenceListChecked": [],
  "SequenceDatabaseName": "SSuis",
  "ParameterFilesToUpload": {
    "[S]/mnt/c/BioSeqDB/WSLProxyRoot/RNK773/Work/CoverageCalculator_0424051529/D1C1/Reference.fa": null
  },
  "ParameterFoldersToUpload": {},
  "SequenceDBPathLinux": "[S]/mnt/e/data/database/SSuis",
  "SequenceDBPath": "[S]E:\\data\\database\\\\SSuis\\SSuis.fasta",
  "SamplesFromLocalDevice": {},
  "SamplesToTransform": {},
  "IsLinux": true,
  "CanRunInLinux": true,
  "DockerBaseImage": "quay.io/biocontainers/dashing:0.4.0--h735f0e5_3",
  "Parameters": "DashingCombine@[sequence_format=fastq.gz]\r\nDashing@[OmitStep=False]\r\nDashing@[PublishOutput=False]\r\nDashing@[IgnoreError=False]\r\nDashing@[IncludeOutput=True]\r\nDashing@[IsDocker=True]\r\n",
  "OutputPath": "[S]E:\\data\\Jimmy\\dashing_test\\",
  "StartWithScript": "Data",
  "ScriptModulesInFlowScript": {
    "GlobalScriptModules": [
      {
        "ModuleName": "Dashing",
        "LockUsername": null,
        "Comment": "",
        "WslCommand": {
          "CommandToken": "D1C2",
          "FlowScriptToken": null,
          "Command": "# create a samples.txt file containing paths to sample sequences\r\n#FS ForEachPrereq DashingCombine\r\n  find $[I.] -name \u0022*fastq*\u0022 -or -name \u0022*fasta*\u0022 \u003E\u003E $[O.]samples.txt\r\n#FS End\r\n\r\n# create reference.txt file containg paths to reference sequences\r\necho @[Reference=] \u003E $[O.]reference.txt\r\n\r\n# filter rare k-mers if analyzing raw reads\r\nfilter_opts=\u0022\u0022\r\nif [[ $(egrep \u0022fastq.gz$|fastq$\u0022 $[O.]samples.txt | wc -l) -ne 0 ]]; then\r\n  filter_opts=\u0022-y\u0022\r\n  echo \u0022Detected raw sequences. Enabling low frequency k-mers filtering.\u0022\r\nfi\r\n\r\ndashing dist -F $[O.]reference.txt -Q $[O.]samples.txt $filter_opts --containment-dist  --nthreads @[threads=16] -O $[O.]dashing_results.tsv --full-tsv",
          "IsNoop": false,
          "CondaPrefix": "",
          "Parms": [],
          "IncludeStandardOutput": true,
          "IsParallel": false,
          "IsSlurm": false,
          "IsDocker": true,
          "IsLinux": true,
          "LinuxJobRunning": false,
          "SlurmJobID": null,
          "SlurmParms": null,
          "WindowsWorkPath": null,
          "IgnoreExitCode": false,
          "WSLResponse": null,
          "ConditionRun": null,
          "ExitCodeConditionGoto": "",
          "Preprocess": null,
          "StandardOutputConditionGoto": "",
          "HDF_Command": null,
          "Prereqs": [
            "DashingCombine"
          ],
          "Thread": 0,
          "StandardOutputBypass": "",
          "WDL": null
        },
        "PublishOutput": false,
        "ConsolidateInput": false,
        "ConsolidatedCmdToken": "",
        "ExpectSamplesHeader": false,
        "RunAfterALLPrereqs": true,
        "RunAfterALLCmdToken": "",
        "OmitStep": false,
        "LastUpdate": "2023-04-24T19:01:33.5309702-06:00",
        "LastAuthor": "SQA032",
        "ScriptParmsList": [
          {
            "ModuleName": "Dashing",
            "ParmName": "Reference",
            "DefaultValue": "",
            "UserValue": "[S]/mnt/c/BioSeqDB/WSLProxyRoot/RNK773/Work/CoverageCalculator_0424051529/D1C1/Reference.fa",
            "Description": "Path to reference sequence",
            "ComboValues": null,
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 5,
            "Validator": null,
            "Extensions": "",
            "MissingValue": "",
            "Public": false
          },
          {
            "ModuleName": "Dashing",
            "ParmName": "threads",
            "DefaultValue": "16",
            "UserValue": "32",
            "Description": "Number of CPU cores to allocate",
            "ComboValues": null,
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 2,
            "Validator": null,
            "Extensions": "",
            "MissingValue": "",
            "Public": false
          },
          {
            "ModuleName": "Dashing",
            "ParmName": "OmitStep",
            "DefaultValue": null,
            "UserValue": "False",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          },
          {
            "ModuleName": "Dashing",
            "ParmName": "PublishOutput",
            "DefaultValue": null,
            "UserValue": "False",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          },
          {
            "ModuleName": "Dashing",
            "ParmName": "IgnoreError",
            "DefaultValue": null,
            "UserValue": "False",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          },
          {
            "ModuleName": "Dashing",
            "ParmName": "IncludeOutput",
            "DefaultValue": null,
            "UserValue": "True",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          },
          {
            "ModuleName": "Dashing",
            "ParmName": "IsDocker",
            "DefaultValue": null,
            "UserValue": "True",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          }
        ],
        "DockerMountMap": [
          "/mnt/c/BioSeqDB/WSLProxyRoot/AGB465/Work/"
        ],
        "DockerImage": null,
        "UserVariableList": {},
        "IsDocker": true,
        "IsSLURM": true,
        "Slurm_Resource_Request": 0,
        "Slurm_Min_Resources": null,
        "Slurm_Moderate_Resources": null,
        "Slurm_Max_Resources": null,
        "WDL_Task": null,
        "WDL_Task_Inputs": null,
        "WDL_Task_Outputs": null,
        "CaseNumberList_JSON": null,
        "CaseNumberList_csv": null
      },
      {
        "ModuleName": "DashingCombine",
        "LockUsername": null,
        "Comment": "",
        "WslCommand": {
          "CommandToken": "D1C1",
          "FlowScriptToken": null,
          "Command": "# global vars\r\nformat=@[sequence_format=fasta]\r\ncombined_input=$[O.]$[D.[SampleName]].${format}\r\noutdir=$[O.]\r\n# combine multi-file inputs into a single file\r\nif [[ format == \u0022fasta\u0022 ]]; then \r\n## enable multiple extensions for fasta formats\r\ncat $(find $[D.[SamplePath]] -name \u0027*.fa\u0027 -or -name \u0027*.fasta\u0027) \u003E $combined_input\r\nelse\r\ncat $[D.[SamplePath]]*.${format} \u003E $combined_input\r\nfi",
          "IsNoop": false,
          "CondaPrefix": "",
          "Parms": [],
          "IncludeStandardOutput": true,
          "IsParallel": false,
          "IsSlurm": false,
          "IsDocker": false,
          "IsLinux": false,
          "LinuxJobRunning": false,
          "SlurmJobID": null,
          "SlurmParms": null,
          "WindowsWorkPath": null,
          "IgnoreExitCode": false,
          "WSLResponse": null,
          "ConditionRun": null,
          "ExitCodeConditionGoto": "",
          "Preprocess": null,
          "StandardOutputConditionGoto": "",
          "HDF_Command": null,
          "Prereqs": [
            "Data"
          ],
          "Thread": 0,
          "StandardOutputBypass": "",
          "WDL": null
        },
        "PublishOutput": false,
        "ConsolidateInput": false,
        "ConsolidatedCmdToken": "",
        "ExpectSamplesHeader": false,
        "RunAfterALLPrereqs": false,
        "RunAfterALLCmdToken": "",
        "OmitStep": false,
        "LastUpdate": "2023-04-24T19:04:27.7992493-06:00",
        "LastAuthor": "SQA032",
        "ScriptParmsList": [
          {
            "ModuleName": "DashingCombine",
            "ParmName": "sequence_format",
            "DefaultValue": "fasta",
            "UserValue": "fastq.gz",
            "Description": "",
            "ComboValues": "fasta|fastq|fastq.gz",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 4,
            "Validator": null,
            "Extensions": "",
            "MissingValue": "",
            "Public": false
          }
        ],
        "DockerMountMap": [],
        "DockerImage": null,
        "UserVariableList": {},
        "IsDocker": false,
        "IsSLURM": true,
        "Slurm_Resource_Request": 0,
        "Slurm_Min_Resources": null,
        "Slurm_Moderate_Resources": null,
        "Slurm_Max_Resources": null,
        "WDL_Task": null,
        "WDL_Task_Inputs": null,
        "WDL_Task_Outputs": null,
        "CaseNumberList_JSON": null,
        "CaseNumberList_csv": null
      },
      {
        "ModuleName": "DashingPublish",
        "LockUsername": null,
        "Comment": "",
        "WslCommand": {
          "CommandToken": "",
          "FlowScriptToken": null,
          "Command": "cat $[I.]*.tsv | sort -k2 | sed \u0027s_.*/__g\u0027 | sed \u0027s/.fastq//g\u0027 | sed \u0027s/.fasta//g\u0027 | sed \u0027s/.gz//g\u0027 \u003E $[O.]dashing_results.tsv",
          "IsNoop": false,
          "CondaPrefix": "",
          "Parms": [],
          "IncludeStandardOutput": true,
          "IsParallel": false,
          "IsSlurm": false,
          "IsDocker": false,
          "IsLinux": false,
          "LinuxJobRunning": false,
          "SlurmJobID": null,
          "SlurmParms": null,
          "WindowsWorkPath": null,
          "IgnoreExitCode": false,
          "WSLResponse": null,
          "ConditionRun": null,
          "ExitCodeConditionGoto": "",
          "Preprocess": null,
          "StandardOutputConditionGoto": "",
          "HDF_Command": null,
          "Prereqs": [
            "Dashing"
          ],
          "Thread": 0,
          "StandardOutputBypass": "",
          "WDL": null
        },
        "PublishOutput": true,
        "ConsolidateInput": false,
        "ConsolidatedCmdToken": null,
        "ExpectSamplesHeader": false,
        "RunAfterALLPrereqs": true,
        "RunAfterALLCmdToken": null,
        "OmitStep": false,
        "LastUpdate": "2023-04-24T19:44:09.6601521-06:00",
        "LastAuthor": "SQA032",
        "ScriptParmsList": [],
        "DockerMountMap": [],
        "DockerImage": null,
        "UserVariableList": {},
        "IsDocker": false,
        "IsSLURM": true,
        "Slurm_Resource_Request": 0,
        "Slurm_Min_Resources": null,
        "Slurm_Moderate_Resources": null,
        "Slurm_Max_Resources": null,
        "WDL_Task": null,
        "WDL_Task_Inputs": null,
        "WDL_Task_Outputs": null,
        "CaseNumberList_JSON": null,
        "CaseNumberList_csv": null
      }
    ]
  },
  "LastUpdate": "2023-06-04T09:35:58.6679551-06:00",
  "LastAuthor": "AGB465",
  "FindFolders": true,
  "InterfaceAdaptive": false,
  "CommandList": [
    {
      "CommandToken": "D1C1",
      "FlowScriptToken": "DashingCombine",
      "Command": "# global vars\nformat=fastq.gz\ncombined_input=/mnt/c/BioSeqDB/WSLProxyRoot/SQA032/Work/DashingFlow_0424074107/D1C1/2.Thompson.Run4.${format}\noutdir=/mnt/c/BioSeqDB/WSLProxyRoot/SQA032/Work/DashingFlow_0424074107/D1C1/\n# combine multi-file inputs into a single file\nif [[ format == \u0022fasta\u0022 ]]; then \n## enable multiple extensions for fasta formats\ncat $(find /mnt/e/data/Ruwani_Novel_Salmonella_Project_2022/Objective2-Run4_NonAdaptive_15Dec22/Objective2-Run4_NonAdaptive_15Dec22/20221215_1215_X2_FAV71906_63db05c7/fastq_pass/2.Thompson.Run4/ -name \u0027*.fa\u0027 -or -name \u0027*.fasta\u0027) \u003E $combined_input\nelse\ncat /mnt/e/data/Ruwani_Novel_Salmonella_Project_2022/Objective2-Run4_NonAdaptive_15Dec22/Objective2-Run4_NonAdaptive_15Dec22/20221215_1215_X2_FAV71906_63db05c7/fastq_pass/2.Thompson.Run4/*.${format} \u003E $combined_input\nfi\n",
      "IsNoop": false,
      "CondaPrefix": "",
      "Parms": [],
      "IncludeStandardOutput": false,
      "IsParallel": true,
      "IsSlurm": false,
      "IsDocker": false,
      "IsLinux": false,
      "LinuxJobRunning": false,
      "SlurmJobID": null,
      "SlurmParms": null,
      "WindowsWorkPath": null,
      "IgnoreExitCode": false,
      "WSLResponse": {
        "ExitCode": 0,
        "StandardOutput": null,
        "StandardError": null,
        "LastCommand": null,
        "RestartCount": 0
      },
      "ConditionRun": null,
      "ExitCodeConditionGoto": "",
      "Preprocess": null,
      "StandardOutputConditionGoto": "",
      "HDF_Command": {
        "Command": 0,
        "DBFileName": null,
        "DBPath": null,
        "Dataset": {
          "SequenceList": [],
          "Standard_Reference_Sequence": "",
          "Standard_Reference_Name": ""
        },
        "DatasetName": "",
        "FindIn": "",
        "FindOut": "",
        "Sample": {
          "SampleName": "",
          "SampleDetail": null,
          "LIMSCaseNumber": null,
          "LIMSTestID": null,
          "LIMSSampleID": null,
          "Sequence": null,
          "SampleFileName": null
        }
      },
      "Prereqs": [],
      "Thread": 0,
      "StandardOutputBypass": "",
      "WDL": null
    }
  ],
  "RemoveReads": false,
  "SLURM_IsAvailable": false
}