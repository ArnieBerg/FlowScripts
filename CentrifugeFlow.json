{
  "FlowScriptName": "CentrifugeFlow",
  "TestConfig": {},
  "SubmissionTimeStamp": "0710073418",
  "LockUsername": null,
  "Comment": "Create a taxonomic classification for a set of sequence reads using Centrifuge.\r\nDo taxonomy analysis on aggregate of all kraken aggregates.",
  "DataSourceType": 1,
  "SerializeDataSteps": false,
  "SampleList": {
    "2123661-1": "1[S]/mnt/e/data/Arnie/2123661-1/"
  },
  "SequenceList": [],
  "SequenceListChecked": [],
  "SequenceDatabaseName": "SSuis_Ruwani",
  "ParameterFilesToUpload": {},
  "ParameterFoldersToUpload": {
    "[S]/mnt/e/data/reference/viralRefSeq_InfA_custom": null
  },
  "SequenceDBPathLinux": "[S]/mnt/e/data/database/SSuis_Ruwani",
  "SequenceDBPath": "[S]E:\\data\\database\\SSuis_Ruwani\\SSuis_Ruwani.fasta",
  "SamplesFromLocalDevice": null,
  "SamplesToTransform": null,
  "IsLinux": false,
  "CanRunInLinux": true,
  "DockerBaseImage": "megashipper/centrifugeenv",
  "Parameters": "Krona Combined Publish@[mag_Col=3]\r\nKrona Combined Publish@[taxID_Col=5]\r\nKrona Combined Publish@[OmitStep=False]\r\nKrona Combined Publish@[PublishOutput=True]\r\nKrona Combined Publish@[IgnoreError=False]\r\nKrona Combined Publish@[IncludeOutput=True]\r\nKrona Combined Publish@[IsDocker=True]\r\nCentrifuge@[OmitStep=False]\r\nCentrifuge@[PublishOutput=True]\r\nCentrifuge@[IgnoreError=False]\r\nCentrifuge@[IncludeOutput=True]\r\nCentrifuge@[IsDocker=True]\r\n",
  "OutputPath": "[S]E:\\data\\Arnie\\CentrifugeResults\\",
  "StartWithScript": "Data",
  "ScriptModulesInFlowScript": {
    "GlobalScriptModules": [
      {
        "ModuleName": "Centrifuge",
        "LockUsername": null,
        "Comment": "Create a taxonomic classification for a set of sequence reads using Centrifuge.",
        "WslCommand": {
          "CommandToken": "D1C1",
          "FlowScriptToken": null,
          "Command": "# Convert filenames in data source to a CSV list of filenames.\r\ncd $[D.[SamplePath]]\r\nls -p *.f* | grep -v / \u003E $[O.]samples.txt\r\ncsv=\u0022\u0022\r\nwhile read value; do \r\n   csv=\u0022${csv},$[D.[SamplePath]]$value\u0022 \r\ndone \u003C $[O.]samples.txt \r\ncd\r\n\r\necho \u0022\u003E\u003E\u003E\u0022\r\necho \u0022conda run -n centrifuge centrifuge -p @[threads=4] -k @[maxResults=50] --ignore-quals -U ${csv:1} -x @[Reference=[S]/mnt/e/data/reference/viralRefSeq_InfA_custom]/@[viralRefIndex=viralRefSeq_InfA_custom] -S $[O.]centrifuge_res.tsv --report-file $[O.]centrifuge_report.tsv\u0022\r\necho \u0022\u003C\u003C\u003C\u0022\r\n\r\nconda run -n centrifuge centrifuge -p @[threads=4] -k @[maxResults=50] --ignore-quals -U ${csv:1} -x @[Reference=[S]/mnt/e/data/reference/viralRefSeq_InfA_custom]/@[viralRefIndex=viralRefSeq_InfA_custom] -S $[O.]centrifuge_res.tsv --report-file $[O.]centrifuge_report.tsv\r\n\r\nconda run -n centrifuge centrifuge-kreport -x @[Reference=[S]/mnt/e/data/reference/viralRefSeq_InfA_custom]/@[viralRefIndex=viralRefSeq_InfA_custom] $[O.]centrifuge_res.tsv \u003E $[O.]centrifuge_res.txt\r\n",
          "IsNoop": false,
          "CondaPrefix": "",
          "Parms": [],
          "IncludeStandardOutput": true,
          "IsParallel": false,
          "IsSlurm": false,
          "IsDocker": true,
          "IsLinux": false,
          "LinuxJobRunning": false,
          "SlurmJobID": null,
          "SlurmParms": null,
          "WindowsWorkPath": null,
          "IgnoreExitCode": false,
          "WSLResponse": null,
          "ConditionRun": null,
          "ExitCodeConditionGoto": "",
          "Preprocess": null,
          "StandardOutputConditionGoto": "",
          "HDF_Command": null,
          "Prereqs": [
            "Data"
          ],
          "Thread": 0,
          "StandardOutputBypass": "",
          "WDL": null
        },
        "PublishOutput": true,
        "ConsolidateInput": false,
        "ConsolidatedCmdToken": "",
        "ExpectSamplesHeader": false,
        "RunAfterALLPrereqs": false,
        "RunAfterALLCmdToken": "",
        "OmitStep": false,
        "LastUpdate": "2023-06-29T11:13:43.7259935-06:00",
        "LastAuthor": "AGB465",
        "ScriptParmsList": [
          {
            "ModuleName": "Centrifuge",
            "ParmName": "viralRefIndex",
            "DefaultValue": "viralRefSeq_InfA_custom",
            "UserValue": "viralRefSeq_InfA_custom",
            "Description": "The name of the set of .cf files that form the index for the virual reference.",
            "ComboValues": null,
            "Optional": false,
            "ReadOnly": true,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 0,
            "Validator": null,
            "Extensions": "",
            "MissingValue": "",
            "Public": false
          },
          {
            "ModuleName": "Centrifuge",
            "ParmName": "maxResults",
            "DefaultValue": "50",
            "UserValue": "50",
            "Description": "Maximum primary assignments for each read.",
            "ComboValues": null,
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 2,
            "Validator": null,
            "Extensions": "",
            "MissingValue": "",
            "Public": false
          },
          {
            "ModuleName": "Centrifuge",
            "ParmName": "threads",
            "DefaultValue": "4",
            "UserValue": "4",
            "Description": "Number of threads",
            "ComboValues": null,
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 2,
            "Validator": null,
            "Extensions": "",
            "MissingValue": "",
            "Public": false
          },
          {
            "ModuleName": "Centrifuge",
            "ParmName": "Reference",
            "DefaultValue": "[S]/mnt/e/data/reference/viralRefSeq_InfA_custom",
            "UserValue": "[S]/mnt/e/data/reference/viralRefSeq_InfA_custom",
            "Description": "Path to Centrifuge database for taxonomic and segment classification.",
            "ComboValues": null,
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 6,
            "Validator": null,
            "Extensions": "cf|",
            "MissingValue": "",
            "Public": false
          },
          {
            "ModuleName": "Centrifuge",
            "ParmName": "OmitStep",
            "DefaultValue": null,
            "UserValue": "False",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          },
          {
            "ModuleName": "Centrifuge",
            "ParmName": "PublishOutput",
            "DefaultValue": null,
            "UserValue": "True",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          },
          {
            "ModuleName": "Centrifuge",
            "ParmName": "IgnoreError",
            "DefaultValue": null,
            "UserValue": "False",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          },
          {
            "ModuleName": "Centrifuge",
            "ParmName": "IncludeOutput",
            "DefaultValue": null,
            "UserValue": "True",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          },
          {
            "ModuleName": "Centrifuge",
            "ParmName": "IsDocker",
            "DefaultValue": null,
            "UserValue": "True",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          }
        ],
        "DockerMountMap": [
          "/mnt/c/BioSeqDB/WSLProxyRoot/AGB465/Work/"
        ],
        "DockerImage": null,
        "UserVariableList": {},
        "IsDocker": true,
        "IsSLURM": true,
        "Slurm_Resource_Request": 0,
        "Slurm_Min_Resources": null,
        "Slurm_Moderate_Resources": null,
        "Slurm_Max_Resources": null,
        "WDL_Task": null,
        "WDL_Task_Inputs": null,
        "WDL_Task_Outputs": null,
        "CaseNumberList_JSON": null,
        "CaseNumberList_csv": null
      },
      {
        "ModuleName": "Krona Combined Publish",
        "LockUsername": null,
        "Comment": "Do taxonomy analysis on aggregate of all kraken aggregates.",
        "WslCommand": {
          "CommandToken": "",
          "FlowScriptToken": null,
          "Command": "\r\n#FS ForEachPrereq\r\ncp $[I{Centrifuge}.]centrifuge_res.txt $[O.]$[V.[SampleName]].kraken.aggregate.txt\r\n#FS End\r\n\r\nconda run -n krona ktImportTaxonomy -tax  /mnt/e/data/reference/databases/taxonomy -t @[taxID_Col=5] -m @[mag_Col=3] -o $[O.]combined.html $[O.]*.kraken.aggregate.txt",
          "IsNoop": false,
          "CondaPrefix": "",
          "Parms": [],
          "IncludeStandardOutput": true,
          "IsParallel": false,
          "IsSlurm": false,
          "IsDocker": true,
          "IsLinux": false,
          "LinuxJobRunning": false,
          "SlurmJobID": null,
          "SlurmParms": null,
          "WindowsWorkPath": null,
          "IgnoreExitCode": false,
          "WSLResponse": null,
          "ConditionRun": null,
          "ExitCodeConditionGoto": "",
          "Preprocess": null,
          "StandardOutputConditionGoto": "",
          "HDF_Command": null,
          "Prereqs": [
            "Centrifuge"
          ],
          "Thread": 0,
          "StandardOutputBypass": "",
          "WDL": null
        },
        "PublishOutput": true,
        "ConsolidateInput": false,
        "ConsolidatedCmdToken": null,
        "ExpectSamplesHeader": false,
        "RunAfterALLPrereqs": true,
        "RunAfterALLCmdToken": null,
        "OmitStep": false,
        "LastUpdate": "2023-07-03T10:02:16.133284-06:00",
        "LastAuthor": "AGB465",
        "ScriptParmsList": [
          {
            "ModuleName": "Krona Combined Publish",
            "ParmName": "mag_Col",
            "DefaultValue": "3",
            "UserValue": "3",
            "Description": "",
            "ComboValues": null,
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 2,
            "Validator": null,
            "Extensions": "",
            "MissingValue": "",
            "Public": false
          },
          {
            "ModuleName": "Krona Combined Publish",
            "ParmName": "taxID_Col",
            "DefaultValue": "5",
            "UserValue": "5",
            "Description": "",
            "ComboValues": null,
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 2,
            "Validator": null,
            "Extensions": "",
            "MissingValue": "",
            "Public": false
          },
          {
            "ModuleName": "Krona Combined Publish",
            "ParmName": "OmitStep",
            "DefaultValue": null,
            "UserValue": "False",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          },
          {
            "ModuleName": "Krona Combined Publish",
            "ParmName": "PublishOutput",
            "DefaultValue": null,
            "UserValue": "True",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          },
          {
            "ModuleName": "Krona Combined Publish",
            "ParmName": "IgnoreError",
            "DefaultValue": null,
            "UserValue": "False",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          },
          {
            "ModuleName": "Krona Combined Publish",
            "ParmName": "IncludeOutput",
            "DefaultValue": null,
            "UserValue": "True",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          },
          {
            "ModuleName": "Krona Combined Publish",
            "ParmName": "IsDocker",
            "DefaultValue": null,
            "UserValue": "True",
            "Description": null,
            "ComboValues": "True|False",
            "Optional": false,
            "ReadOnly": false,
            "Hidden": false,
            "DeleteFlag": false,
            "DataType": 1,
            "Validator": null,
            "Extensions": null,
            "MissingValue": null,
            "Public": true
          }
        ],
        "DockerMountMap": [
          "/mnt/c/BioSeqDB/WSLProxyRoot/AGB465/Work/"
        ],
        "DockerImage": "megashipper/kronaenv",
        "UserVariableList": {},
        "IsDocker": true,
        "IsSLURM": true,
        "Slurm_Resource_Request": 0,
        "Slurm_Min_Resources": null,
        "Slurm_Moderate_Resources": null,
        "Slurm_Max_Resources": null,
        "WDL_Task": null,
        "WDL_Task_Inputs": null,
        "WDL_Task_Outputs": null,
        "CaseNumberList_JSON": null,
        "CaseNumberList_csv": null
      }
    ]
  },
  "LastUpdate": "2023-07-10T19:42:34.4290304-06:00",
  "LastAuthor": "AGB465",
  "FindFolders": true,
  "InterfaceAdaptive": false,
  "CommandList": null,
  "RemoveReads": false,
  "SLURM_IsAvailable": false
}